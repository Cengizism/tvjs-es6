{"version":3,"sources":["webpack:///webpack/bootstrap f8de8fc9ad4696572d4a","webpack:///./src/main.js","webpack:///./src/resource-loader.js","webpack:///./src/presenter.js"],"names":[],"mappings":"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","file":"dist/application.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap f8de8fc9ad4696572d4a\n **/","var resourceLoader;\n\nimport ResourceLoader from './resource-loader';\nimport Presenter from './presenter';\n\nApp.onLaunch = function(options) {\n  localStorage.setItem('baseurl', options.BASEURL);\n\n  resourceLoader = new ResourceLoader(options.BASEURL);\n\n  var index = resourceLoader.loadResource(`${options.BASEURL}templates/Index.xml.js`,\n    function(resource) {\n      var presenter = new Presenter;\n      var doc = presenter.makeDocument(resource);\n\n      doc.addEventListener('select', presenter.load.bind(presenter));\n\n      navigationDocument.pushDocument(doc);\n    });\n}\n\nvar createAlert = function(title, description) {\n  var alertString = `<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n        <document>\n          <alertTemplate>\n            <title>${title}</title>\n            <description>${description}</description>\n          </alertTemplate>\n        </document>`\n\n  var parser = new DOMParser();\n  var alertDoc = parser.parseFromString(alertString, 'application/xml');\n\n  return alertDoc;\n}\n\nvar buildResults = function(doc, searchText) {\n  var regExp = new RegExp(searchText, 'i');\n\n  var matchesText = function(value) {\n    return regExp.test(value);\n  }\n\n  var movies = {\n    'The Puffin': 1,\n    'Lola and Max': 2,\n    'Road to Firenze': 3,\n    'Three Developers and a Baby': 4,\n    'Santa Cruz Surf': 5,\n    'Cinque Terre': 6,\n    'Creatures of the Rainforest': 7\n  };\n\n  var titles = Object.keys(movies);\n  var domImplementation = doc.implementation;\n  var lsParser = domImplementation.createLSParser(1, null);\n  var lsInput = domImplementation.createLSInput();\n\n  lsInput.stringData = `<list>\n      <section>\n        <header>\n          <title>No Results</title>\n        </header>\n      </section>\n    </list>`;\n\n  titles = (searchText) ? titles.filter(matchesText) : titles;\n\n  if (titles.length > 0) {\n    lsInput.stringData = `<shelf><header><title>Results</title></header><section id=\"Results\">`;\n\n    for (var i = 0; i < titles.length; i++) {\n      lsInput.stringData += `<lockup>\n          <img src=\"${this.resourceLoader.BASEURL}resources/images/movies/movie_${movies[titles[i]]}.lcr\" width=\"350\" height=\"520\" />\n          <title>${titles[i]}</title>\n        </lockup>`;\n    }\n\n    lsInput.stringData += `</section></shelf>`;\n  }\n\n  lsParser.parseWithContext(lsInput, doc.getElementsByTagName(\"collectionList\").item(0), 2);\n\n  getMovies('http://api.themoviedb.org/3/search/movie?api_key=c8806e55322afd9062df9442a5feffec&query=' + searchText, function(response) {\n    console.log(response.results);\n  });\n}\n\nfunction getMovies(url, callback) {\n  var templateXHR = new XMLHttpRequest();\n\n  templateXHR.responseType = 'document';\n\n  templateXHR.addEventListener('loadend', function() {\n    callback.call(this, JSON.parse(templateXHR.responseText));\n  }, false);\n\n  templateXHR.open('GET', url, true);\n  templateXHR.send();\n\n  return templateXHR;\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/main.js\n **/","class ResourceLoader {\n  constructor(baseurl) {\n    if (!baseurl) {\n      //throw (\"ResourceLoader: baseurl is required.\");\n    }\n\n    this.BASEURL = baseurl || 'http://localhost:9001/';\n  }\n\n  loadResource(resource, callback) {\n    var self = this;\n\n    evaluateScripts([resource], function(success) {\n      if (success) {\n        var resource = Template.call(self);\n        callback.call(self, resource);\n      } else {\n        var title = \"Resource Loader Error\",\n          description = `There was an error attempting to load the resource '${resource}'. \\n\\n Please try again later.`,\n          alert = createAlert(title, description);\n\n        Presenter.removeLoadingIndicator();\n\n        navigationDocument.presentModal(alert);\n      }\n    });\n  }\n}\n\nexport default ResourceLoader;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/resource-loader.js\n **/","import ResourceLoader from './resource-loader';\n\nclass Presenter {\n  constructor() {\n    this.loadingTemplate = `<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n          <document>\n            <loadingTemplate>\n              <activityIndicator>\n                <text>Loading...</text>\n              </activityIndicator>\n            </loadingTemplate>\n          </document>`\n  }\n\n  defaultPresenter(xml) {\n    if (this.loadingIndicatorVisible) {\n      navigationDocument.replaceDocument(xml, this.loadingIndicator);\n\n      this.loadingIndicatorVisible = false;\n    } else {\n      navigationDocument.pushDocument(xml);\n    }\n  }\n\n  searchPresenter(xml) {\n    this.defaultPresenter.call(this, xml);\n    var doc = xml;\n\n    var searchField = doc.getElementsByTagName('searchField').item(0);\n    var keyboard = searchField.getFeature('Keyboard');\n\n    keyboard.onTextChange = function() {\n      var searchText = keyboard.text;\n      //console.log('search text changed: ' + searchText);\n      buildResults(doc, searchText);\n    }\n  }\n\n  modalDialogPresenter(xml) {\n    navigationDocument.presentModal(xml);\n  }\n\n  menuBarItemPresenter(xml, ele) {\n    var feature = ele.parentNode.getFeature('MenuBarDocument');\n\n    if (feature) {\n      var currentDoc = feature.getDocument(ele);\n\n      if (!currentDoc) {\n        feature.setDocument(xml, ele);\n      }\n    }\n  }\n\n  load(event) {\n    var self = this,\n      ele = event.target,\n      templateURL = ele.getAttribute('template'),\n      presentation = ele.getAttribute('presentation');\n\n    if (templateURL) {\n      self.showLoadingIndicator(presentation);\n\n      let resourceLoader = new ResourceLoader(localStorage.getItem('baseurl'));\n\n      resourceLoader.loadResource(templateURL,\n        function(resource) {\n          if (resource) {\n            var doc = self.makeDocument(resource);\n\n            doc.addEventListener('select', self.load.bind(self));\n            doc.addEventListener('highlight', self.load.bind(self));\n\n            if (self[presentation] instanceof Function) {\n              self[presentation].call(self, doc, ele);\n            } else {\n              self.defaultPresenter.call(self, doc);\n            }\n          }\n        }\n      );\n    }\n  }\n\n  makeDocument(resource) {\n    if (!Presenter.parser) {\n      Presenter.parser = new DOMParser();\n    }\n\n    var doc = Presenter.parser.parseFromString(resource, 'application/xml');\n    return doc;\n  }\n\n  showLoadingIndicator(presentation) {\n    if (!this.loadingIndicator) {\n      this.loadingIndicator = this.makeDocument(this.loadingTemplate);\n    }\n\n    if (!this.loadingIndicatorVisible && presentation != 'modalDialogPresenter' && presentation != 'menuBarItemPresenter') {\n      navigationDocument.pushDocument(this.loadingIndicator);\n\n      this.loadingIndicatorVisible = true;\n    }\n  }\n\n  removeLoadingIndicator() {\n    if (this.loadingIndicatorVisible) {\n      navigationDocument.removeDocument(this.loadingIndicator);\n\n      this.loadingIndicatorVisible = false;\n    }\n  }\n}\n\nexport default Presenter;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/presenter.js\n **/"],"sourceRoot":""}
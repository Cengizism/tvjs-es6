{"version":3,"sources":["webpack:///webpack/bootstrap d3f902d18043659d153d","webpack:///./src/main.js","webpack:///./src/presenter.js"],"names":[],"mappings":"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","file":"dist/application.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap d3f902d18043659d153d\n **/","import Presenter from './presenter';\n\nApp.onLaunch = function(options) {\n  let presenter = new Presenter(options.BASEURL);\n  let path = `${options.BASEURL}templates/Index.xml.js`;\n\n  var index = presenter.loadResource(path, (resource) => {\n    let doc = presenter.makeDocument(resource);\n    doc.addEventListener('select', presenter.load.bind(presenter));\n    navigationDocument.pushDocument(doc);\n  });\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/main.js\n **/","class Presenter {\n  constructor(baseurl) {\n    if (!baseurl) {\n      throw (\"ResourceLoader: baseurl is required.\");\n    }\n    this.BASEURL = baseurl;\n\n    this.loadingTemplate = `<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n            <document>\n              <loadingTemplate>\n                <activityIndicator>\n                  <text>Loading...</text>\n                </activityIndicator>\n              </loadingTemplate>\n            </document>`;\n  }\n\n  createAlert(alert) {\n    let body = `<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n          <document>\n            <alertTemplate>\n              <title>${alert.title}</title>\n              <description>${alert.description}</description>\n            </alertTemplate>\n          </document>`\n\n    let parser = new DOMParser();\n    return parser.parseFromString(body, 'application/xml');\n  }\n\n  loadResource(resource, callback) {\n    evaluateScripts([resource], (success) => {\n      if (success) {\n        callback.call(this, Template.call(this));\n      } else {\n        let alert = {\n          title: 'Resource Loader Error',\n          description: `There was an error attempting to load the resource '${resource}'. \\n\\n Please try again later.`\n        };\n\n        Presenter.removeLoadingIndicator();\n        navigationDocument.presentModal( createAlert(alert) );\n      }\n    });\n  }\n\n  defaultPresenter(xml) {\n    if (this.loadingIndicatorVisible) {\n      navigationDocument.replaceDocument(xml, this.loadingIndicator);\n\n      this.loadingIndicatorVisible = false;\n    } else {\n      navigationDocument.pushDocument(xml);\n    }\n  }\n\n  buildResults(doc, searchText) {\n    let regExp = new RegExp(searchText, 'i');\n    let matchesText = value => regExp.test(value);\n\n    let movies = {\n      'The Puffin': 1,\n      'Lola and Max': 2,\n      'Road to Firenze': 3,\n      'Three Developers and a Baby': 4,\n      'Santa Cruz Surf': 5,\n      'Cinque Terre': 6,\n      'Creatures of the Rainforest': 7\n    };\n    let titles = Object.keys(movies);\n\n    let domImplementation = doc.implementation;\n    let lsParser = domImplementation.createLSParser(1, null);\n    let lsInput = domImplementation.createLSInput();\n\n    lsInput.stringData = `<list>\n        <section>\n          <header>\n            <title>No Results</title>\n          </header>\n        </section>\n      </list>`;\n\n    titles = (searchText) ? titles.filter(matchesText) : titles;\n\n    if (titles.length > 0) {\n      lsInput.stringData = `<shelf><header><title>Results</title></header><section id=\"Results\">`;\n\n      for (let title of titles) {\n        lsInput.stringData += `<lockup>\n            <img src=\"${this.BASEURL}resources/images/movies/movie_${movies[title]}.lcr\" width=\"350\" height=\"520\" />\n            <title>${title}</title>\n          </lockup>`;\n      }\n\n      lsInput.stringData += `</section></shelf>`;\n    }\n\n    lsParser.parseWithContext(lsInput, doc.getElementsByTagName('collectionList').item(0), 2);\n  }\n\n  searchPresenter(xml) {\n    this.defaultPresenter.call(this, xml);\n\n    let doc = xml;\n    let searchField = doc.getElementsByTagName('searchField').item(0);\n    let keyboard = searchField.getFeature('Keyboard');\n\n    keyboard.onTextChange = () => {\n      let searchText = keyboard.text;\n      console.log('search text changed: ' + searchText);\n      this.buildResults(doc, searchText);\n    }\n  }\n\n  modalDialogPresenter(xml) {\n    navigationDocument.presentModal(xml);\n  }\n\n  menuBarItemPresenter(xml, element) {\n    let feature = element.parentNode.getFeature('MenuBarDocument');\n\n    if (feature) {\n      let currentDoc = feature.getDocument(element);\n\n      if (!currentDoc) {\n        feature.setDocument(xml, element);\n      }\n    }\n  }\n\n  load(event) {\n    let element = event.target;\n    let templateURL = element.getAttribute('template');\n    let presentation = element.getAttribute('presentation');\n\n    if (templateURL) {\n      this.showLoadingIndicator(presentation);\n\n      this.loadResource(templateURL, (resource) => {\n        if (resource) {\n          var doc = this.makeDocument(resource);\n\n          doc.addEventListener('select', this.load.bind(this));\n          doc.addEventListener('highlight', this.load.bind(this));\n\n          if (this[presentation] instanceof Function) {\n            this[presentation].call(this, doc, element);\n          } else {\n            this.defaultPresenter.call(this, doc);\n          }\n        }\n      });\n    }\n  }\n\n  makeDocument(resource) {\n    if (!Presenter.parser) {\n      Presenter.parser = new DOMParser();\n    }\n\n    return Presenter.parser.parseFromString(resource, 'application/xml');\n  }\n\n  showLoadingIndicator(presentation) {\n    if (!this.loadingIndicator) {\n      this.loadingIndicator = this.makeDocument(this.loadingTemplate);\n    }\n\n    if (!this.loadingIndicatorVisible && presentation != 'modalDialogPresenter' && presentation != 'menuBarItemPresenter') {\n      navigationDocument.pushDocument(this.loadingIndicator);\n\n      this.loadingIndicatorVisible = true;\n    }\n  }\n\n  removeLoadingIndicator() {\n    if (this.loadingIndicatorVisible) {\n      navigationDocument.removeDocument(this.loadingIndicator);\n\n      this.loadingIndicatorVisible = false;\n    }\n  }\n}\n\nexport default Presenter;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/presenter.js\n **/"],"sourceRoot":""}